{% extends 'public/public_base.html'%}

{%block title%}Chart{%endblock title%}

{%block main%}
<title>Portfolio</title>

<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<div class="container">
    <div class="tx_contain">
        <div>{{daily_tx_plot|safe}}</div>
    </div>
    <div class="middle_contain">
        <div class="pi_contain">
            <div>{{pie_sub_plots|safe}}</div>
        </div>
        <div class="risk_contain">
            <table id="risk_table" cellpadding="0" cellspacing="0">
                <thead>
                    <tr>
                        <th>Customer</th>
                        <th>Customer_Strikes</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in high_customer %}
                    <tr>
                        <td>{{ row.Customer }}</td>
                        <td>{{ row.Customer_Strikes }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="tx_contain">
        <div>{{monthly_low_plot|safe}}</div>
    </div>
</div>

<iframe id="pdf-iframe" src="../../static/pdf/EissaHaidar_Resume.pdf"></iframe>

<script>
    const iframe = document.getElementById("pdf-iframe");
    function resizeIframe() {
        const width = iframe.offsetWidth;
        const height = Math.floor(((width) * 1.3)); // 130% of width in pixels
        iframe.style.height = `${Math.min(height, 1370)}px`; // set iframe height to the minimum of calculated height and maximum height of 1370px
    }
    // Call resizeIframe() when the page loads and when the window is resized
    window.addEventListener("load", resizeIframe);
    window.addEventListener("resize", resizeIframe);
</script>
{%endblock main%}